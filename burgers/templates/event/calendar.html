{% extends 'header_template.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/lib/datatable/dataTables.bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'fullcalendar/lib/main.css' %}">
{% endblock css %}
{% block content %}
<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-md-12">
                <h2><strong class="card-title">Reservation Calendar</strong></h2> 
            </div>
        </div>

    </div>
    <div id="calendar" class="container" style="padding: 20px;"></div>
</div>


{% endblock content %}
{% block script %}
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="{% static 'js/lib/data-table/dataTables.bootstrap.min.js' %}"></script>
<script src="{% static 'fullcalendar/lib/main.js' %}"></script>
<script src="{% static 'fullcalendar/lib/locales-all.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function(){
        var calendarUI = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarUI,{
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
            },
            events: [
                {% for reservation in object_list %}
                    {
                        title: '{{ reservation.client }} {{ reservation.start_date | time:"H:i" }} -> {{ reservation.end_date | time:"H:i" }}',
                        start: '{{ reservation.start_date | date:"Y-m-d" }}',
                        end: '{{ reservation.end_date | date:"Y-m-d" }}',
                    },
                {% endfor %}
            ]
        });
        calendar.render();
        calendar.setOption('locale','es');
    });
</script>
{% endblock script %}